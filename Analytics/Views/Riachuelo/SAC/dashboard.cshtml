@{
    Layout = "~/Views/master.cshtml";
}

<div ng-controller="ctrl-riachuelosac">

    <!-- HEADER-->
    <header class="page-header">
        <div class="page-name">Dashboard SAC</div>
    </header>

    <!--FILAS-->
    <div class="col-xs-12 col-lg-6 margin-bottom">
        <div class="card">
            <div class="card-header">
                <span class="card-header-title">Filas de Atendimento</span>
                <div class="card-header-button card-header-expand">
                    <i class="fa fa-expand"></i>
                </div>
            </div>
            <div class="card-body">
                <high-chart series="dashboard.grafico_fila" axis-Categories="dashboard.fila_categorias" type="bar" plot-Options-Bar-Data-Label="true" tooltip-Point-Format="{point.y} (<b>{point.percentage:.1f}%</b>)" height="360"></high-chart>
            </div>
        </div>
    </div>

    <!--QTD PA-->
    <div class="col-xs-12 col-lg-6 margin-bottom">
        <div class="card">
            <div class="card-header">
                <span class="card-header-title">Quantidade de P.A</span>
                <div class="card-header-button card-header-expand">
                    <i class="fa fa-expand"></i>
                </div>
            </div>
            <div class="card-body">

                <div class="row">
                    <!--HUMANO-->
                    <div class="col-xs-6">
                        <div class="small-box bg-purple">
                            <div class="inner">
                                <h3 ng-bind="dashboard.pa_humano"></h3>
                                <p>Humano</p>
                            </div>
                            <div class="icon">
                                <i class="fa fa-user"></i>
                            </div>
                        </div>
                    </div>
                    <!--DIGITAL-->
                    <div class="col-xs-6">
                        <div class="small-box bg-black">
                            <div class="inner">
                                <h3 ng-bind="dashboard.pa_digital"></h3>
                                <p>Digital</p>
                            </div>
                            <div class="icon">
                                <i class="fa fa-phone"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <h4 class="text-center">Comparativo de Produtividade</h4>
                    <div class="col-xs-6">
                        <high-chart series="dashboard.comparativo.atendimentos" axis-Categories="dashboard.comparativo.categorias" plot-Options-Column-Data-Label="true" type="column" height="200"></high-chart>
                    </div>
                    <div class="col-xs-6">
                        <high-chart series="dashboard.comparativo.ns" axis-Categories="dashboard.comparativo.categorias" plot-Options-Column-Data-Label="true" type="column" height="200"></high-chart>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!--FILAS-->
    <div class="col-xs-12 margin-bottom">
        <div class="card">
            <div class="card-header">
                <span class="card-header-title">Análise por Fila</span>
                <div class="card-header-button card-header-expand">
                    <i class="fa fa-expand"></i>
                </div>
            </div>
            <div class="card-body">
                <!--TABELA-->
                <div class="table-responsive">
                    <table class="table table-striped table-bordered" style="width:100%" ng-if="dashboard.fila">
                        <thead>
                            <tr>
                                <th>Fila</th>
                                <th>NS (20s)</th>
                                <th>Chamada</th>
                                <th>Atendida</th>
                                <th>Abandonada</th>
                                <th>Tempo Médio Atendimento</th>
                                <th>Tempo Médio em Fila</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="f in dashboard.fila">
                                <td>{{f.fila}}</td>
                                <td>{{f.ns}}</td>
                                <td>{{f.chamada}}</td>
                                <td>{{f.atendido}}</td>
                                <td>{{f.abandonado}}</td>
                                <td>{{f.tma}}</td>
                                <td>{{f.tmf}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!--HORA HORA-->
    <div class="col-xs-6 margin-bottom">
        <div class="card">
            <div class="card-header">
                <span class="card-header-title">Gráfico por Hora</span>
                <div class="card-header-button card-header-expand">
                    <i class="fa fa-expand"></i>
                </div>
            </div>
            <div class="card-body">
                <p><small>Chamadas deste mês</small></p>

                <h4 class="text-center">Humano</h4>
                <high-chart class="margin-bottom" series="dashboard.graficohora_h" axis-Categories="dashboard.horas" type="column"
                            plot-Options-Column-Stacking="normal" y-Axis1-Min="80"
                            y-Axis1-Max="100" height="200"></high-chart>

                <h4 class="text-center">Digital</h4>
                <high-chart series="dashboard.graficohora_d" axis-Categories="dashboard.horas" type="column"
                            plot-Options-Column-Stacking="normal" y-Axis1-Min="80"
                            y-Axis1-Max="100" height="200"></high-chart>
            </div>
        </div>
    </div>

    <!--REGIÃO-->
    <div class="col-xs-12 col-lg-6 margin-bottom">
        <div class="card">
            <div class="card-header">
                <span class="card-header-title">Incoming Calls por Região</span>
                <div class="card-header-button card-header-expand">
                    <i class="fa fa-expand"></i>
                </div>
            </div>
            <div class="card-body">
                <p><small>Chamadas deste mês</small></p>
                <mapa-brasil style="height: 480px" width="100%" dados="dashboard.mapa"></mapa-brasil>
            </div>
        </div>
    </div>

    <!--TEMPOS-->
    <div class="col-xs-12 col-lg-6 margin-bottom">
        <div class="card">
            <div class="card-header">
                <span class="card-header-title">Tempos Humano</span>
                <div class="card-header-button card-header-expand">
                    <i class="fa fa-expand"></i>
                </div>
            </div>
            <div class="card-body">
                <div class="row">

                    <div class="col-xs-6">

                        <div class="small-box bg-gray">
                            <div class="inner">
                                <b>Logado:</b> <span ng-bind="dashboard.tempos_h.logado"></span>
                            </div>
                        </div>

                        <div class="small-box bg-gray">
                            <div class="inner">
                                <b>TMA:</b> <span ng-bind="dashboard.tempos_h.tma"></span>
                            </div>
                        </div>

                        <div class="small-box bg-gray">
                            <div class="inner">
                                <b>Tempo Fila:</b> <span ng-bind="dashboard.tempos_h.tmf"></span>
                            </div>
                        </div>

                    </div>

                    <div class="col-xs-6">

                        <div class="small-box bg-green">
                            <div class="inner">
                                <b>Conversado:</b> <span ng-bind="dashboard.tempos_h.conversado"></span>
                            </div>
                        </div>

                        <div class="small-box bg-yellow">
                            <div class="inner">
                                <b>Pausas:</b> <span ng-bind="dashboard.tempos_h.pausas"></span>
                            </div>
                        </div>

                        <div class="small-box bg-red">
                            <div class="inner">
                                <b>Disponível:</b> <span ng-bind="dashboard.tempos_h.disponivel"></span>
                            </div>
                        </div>

                    </div>

                    <high-chart series="dashboard.tempos_h.ocupacao" type="pie" tooltip-Point-Format="{point.y} (<b>{point.percentage:.1f}%</b>)" height="180"></high-chart>

                </div>
            </div>
        </div>
    </div>

    <!--TEMPOS-->
    <div class="col-xs-12 col-lg-6 margin-bottom">
        <div class="card">
            <div class="card-header">
                <span class="card-header-title">Tempos Digital</span>
                <div class="card-header-button card-header-expand">
                    <i class="fa fa-expand"></i>
                </div>
            </div>
            <div class="card-body">
                <div class="row">

                    <div class="col-xs-6">

                        <div class="small-box bg-gray">
                            <div class="inner">
                                <b>Logado:</b> <span ng-bind="dashboard.tempos_d.logado"></span>
                            </div>
                        </div>

                        <div class="small-box bg-gray">
                            <div class="inner">
                                <b>TMA:</b> <span ng-bind="dashboard.tempos_d.tma"></span>
                            </div>
                        </div>

                        <div class="small-box bg-gray">
                            <div class="inner">
                                <b>Tempo Fila:</b> <span ng-bind="dashboard.tempos_d.tmf"></span>
                            </div>
                        </div>

                    </div>

                    <div class="col-xs-6">

                        <div class="small-box bg-green">
                            <div class="inner">
                                <b>Conversado:</b> <span ng-bind="dashboard.tempos_d.conversado"></span>
                            </div>
                        </div>

                        <div class="small-box bg-yellow">
                            <div class="inner">
                                <b>Pausas:</b> <span ng-bind="dashboard.tempos_d.pausas"></span>
                            </div>
                        </div>

                        <div class="small-box bg-red">
                            <div class="inner">
                                <b>Disponível:</b> <span ng-bind="dashboard.tempos_d.disponivel"></span>
                            </div>
                        </div>

                    </div>

                    <high-chart series="dashboard.tempos_d.ocupacao" type="pie" tooltip-Point-Format="{point.y} (<b>{point.percentage:.1f}%</b>)" height="180"></high-chart>

                </div>
            </div>
        </div>
    </div>

</div>

<script>
    angular.module('app').controller('ctrl-riachuelosac', function ($scope, $http, $filter) {

        $scope.dashboard = {
            comparativo: {},
            fila: {},
            tempos_h: {},
            tempos_d: {},
        };

        $scope.dashboard.atendimento = '32M'
        $scope.dashboard.ns = '97.5%'
        $scope.dashboard.tma = '00:03:23'
        $scope.dashboard.tmf = '00:00:14'

        $scope.dashboard.fila_categorias = [
            'solicitação de 2 via'
            , 'cancelamento'
            , 'melhor data para pagamento'
            , 'consulta de saldo'
            , 'consulta de limite'
            , 'alteração de vencimento'
            , 'reclamação'
            , 'consulta de lojas'
            , 'renegociação'
            , 'duvidas sobre produtos'
            , 'solicitação de cartão adicional'
            , 'trocas e devoluções'
            , 'rastreamento de pedidos'
        ];

        $scope.dashboard.grafico_fila = [{
            name: 'Atendimento', data: [
                    { y: 542915 },
                    { y: 144777 },
                    { y: 325749 },
                    { y: 579109 },
                    { y: 615303 },
                    { y: 506720 },
                    { y: 470526 },
                    { y: 180972 },
                    { y: 398137 },
                    { y: 361943 },
                    { y: 289554 },
                    { y: 108583 },
                    { y: 180972 },
            ]
        }];
        
        $scope.dashboard.pa_humano = 400;
        $scope.dashboard.pa_digital = 600;
        $scope.dashboard.comparativo.categorias = ["Humano", "Digital"];
        $scope.dashboard.comparativo.atendimentos = [{ name: 'Atendimento por Dia', data: [{ y: 102, color: '#605ca8' }, { y: 345, color: 'black' }] }];
        $scope.dashboard.comparativo.ns = [{ name: 'Nível de Serviço', data: [{ y: 96.6, color: '#605ca8' }, { y: 98.4, color: 'black' }] }];

        $scope.dashboard.fila = [
            { fila: 'solicitação de 2 via', ns: '98.1%', chamada: '557092', atendido: '555405', abandonado: '1687', tma: '00:03:21', tmf: '00:00:14' },
            { fila: 'cancelamento', ns: '97.5%', chamada: '148558', atendido: '148108', abandonado: '450', tma: '00:03:39', tmf: '00:00:14' },
            { fila: 'melhor data para pagamento', ns: '97.8%', chamada: '334255', atendido: '333243', abandonado: '1012', tma: '00:02:57', tmf: '00:00:14' },
            { fila: 'consulta de saldo', ns: '97.5%', chamada: '594232', atendido: '592432', abandonado: '1800', tma: '00:03:39', tmf: '00:00:12' },
            { fila: 'consulta de limite', ns: '98.2%', chamada: '631371', atendido: '629459', abandonado: '1912', tma: '00:03:11', tmf: '00:00:13' },
            { fila: 'alteração de vencimento', ns: '97.6%', chamada: '519953', atendido: '518378', abandonado: '1575', tma: '00:03:43', tmf: '00:00:12' },
            { fila: 'reclamação', ns: '96.9%', chamada: '482813', atendido: '481351', abandonado: '1462', tma: '00:02:55', tmf: '00:00:13' },
            { fila: 'consulta de lojas', ns: '97.1%', chamada: '185697', atendido: '185135', abandonado: '562', tma: '00:03:21', tmf: '00:00:14' },
            { fila: 'renegociação', ns: '97.6%', chamada: '408534', atendido: '407297', abandonado: '1237', tma: '00:03:41', tmf: '00:00:14' },
            { fila: 'duvidas sobre produtos', ns: '98.2%', chamada: '371395', atendido: '370270', abandonado: '1125', tma: '00:03:33', tmf: '00:00:14' },
            { fila: 'solicitação de cartão adicional', ns: '96.8%', chamada: '297116', atendido: '296216', abandonado: '900', tma: '00:03:09', tmf: '00:00:14' },
            { fila: 'trocas e devoluções', ns: '96.9%', chamada: '111418', atendido: '111081', abandonado: '337', tma: '00:03:41', tmf: '00:00:13' },
            { fila: 'rastreamento de pedidos', ns: '97.4%', chamada: '185697', atendido: '185135', abandonado: '562', tma: '00:03:07', tmf: '00:00:16' },
        ];

        $scope.dashboard.horas = ["08h", "09h", "10h", "11h", "12h", "13h", "14h", "15h", "16h", "17h"];

        $scope.dashboard.graficohora_h = [
                                    { name: 'atendido', type: 'column', data: [44245, 44245, 66367, 66367, 66367, 60836, 55306, 60836, 44245, 49775, 66367, 55306, 49775, 44245] },
                                    { name: 'abandonado', type: 'column', data: [391, 391, 586, 586, 586, 538, 489, 538, 391, 440, 586, 489, 440, 391] },
                                    { name: 'NS (20s)', yAxis: 1, type: 'spline', data: [96.5, 96.4, 96.6, 96.3, 96.7, 96.7, 97, 97.2, 97.3, 97.3, 97.2, 95.8, 97.1, 95.9] }
        ];


        $scope.dashboard.graficohora_d = [
                            { name: 'atendido', type: 'column', data: [252491, 252491, 308601, 308601, 280546, 308601, 280546, 308601, 280546, 280546, 280546, 280546, 252491, 252491] },
                            { name: 'abandonado', type: 'column', data: [510, 510, 623, 623, 566, 623, 566, 623, 566, 566, 566, 566, 510, 510] },
                            { name: 'NS (20s)', yAxis: 1, type: 'spline', data: [98.9, 98.5, 97.9, 98.1, 98.1, 99.1, 97.8, 98.2, 98.7, 98.4, 98.8, 98.3, 98.7, 98.2] }
        ];

        $scope.dashboard.mapa = [
  { id: 'BR-AC', value: 52419 }
, { id: 'BR-AL', value: 34946 }
, { id: 'BR-AM', value: 69892 }
, { id: 'BR-AP', value: 52419 }
, { id: 'BR-BA', value: 122311 }
, { id: 'BR-CE', value: 87365 }
, { id: 'BR-DF', value: 349460 }
, { id: 'BR-ES', value: 192203 }
, { id: 'BR-GO', value: 349460 }
, { id: 'BR-MA', value: 174730 }
, { id: 'BR-MG', value: 401879 }
, { id: 'BR-MS', value: 209676 }
, { id: 'BR-MT', value: 192203 }
, { id: 'BR-PA', value: 122311 }
, { id: 'BR-PB', value: 69892 }
, { id: 'BR-PE', value: 139784 }
, { id: 'BR-PI', value: 69892 }
, { id: 'BR-PR', value: 104838 }
, { id: 'BR-RJ', value: 297041 }
, { id: 'BR-RN', value: 244622 }
, { id: 'BR-RO', value: 104838 }
, { id: 'BR-RR', value: 69892 }
, { id: 'BR-RS', value: 174730 }
, { id: 'BR-SC', value: 331987 }
, { id: 'BR-SE', value: 122311 }
, { id: 'BR-SP', value: 436825 }
, { id: 'BR-TO', value: 139784 }
        ]
        
        $scope.dashboard.tempos_h.logado = "12:40";
        $scope.dashboard.tempos_h.conversado = "08:17";
        $scope.dashboard.tempos_h.disponivel = "02:28";
        $scope.dashboard.tempos_h.pausas = "01:54";
        $scope.dashboard.tempos_h.tma = "00:04:52";
        $scope.dashboard.tempos_h.tmf = "00:00:19";
        $scope.dashboard.tempos_h.ocupacao = [{ data: [{ name: "Conversando", y: 65.5, color: "#00a65a" }, { name: "Pausa", y: 15.0, color: "#f39c12" }, { name: "Disponivel", y: 19.5, color: "#dd4b39" }] }];

        $scope.dashboard.tempos_d.logado = "12:40";
        $scope.dashboard.tempos_d.conversado = "10:56";
        $scope.dashboard.tempos_d.disponivel = "01:43";
        $scope.dashboard.tempos_d.pausas = "00:00";
        $scope.dashboard.tempos_d.tma = "00:01:54";
        $scope.dashboard.tempos_d.tmf = "00:00:08";
        $scope.dashboard.tempos_d.ocupacao = [{ data: [{ name: "Conversando", y: 86.4, color: "#00a65a" }, { name: "Disponivel", y: 13.6, color: "#dd4b39" }] }];


    });
</script>